/**
 * DOS Terminal Theme
 * Global theme system:
 * - Light mode: Modern clean UI (no DOS effects)
 * - Dark mode: DOS terminal aesthetic (all DOS effects)
 *
 * ALL DOS effects are now ONLY applied in dark mode via [data-theme="dark"]
 */

/* Import DOS-specific font */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap');

/* ============================================
   DARK MODE ONLY - DOS TERMINAL
   ============================================ */

[data-theme="dark"] .dos-container {
  font-family: 'IBM Plex Mono', 'Courier New', monospace;
  background: #000000;
  color: #00ff00;
}

/* Light mode: Use standard theme variables */
[data-theme="light"] .dos-container {
  font-family: var(--font-family-base);
  background: var(--color-background);
  color: var(--color-text);
  animation: none;
}

/* Session Info Bar - DARK MODE ONLY */
[data-theme="dark"] .dos-session-bar {
  background: #000000;
}

[data-theme="light"] .dos-session-bar {
  background: var(--color-surface);
}

/* Input Container - DARK MODE ONLY */
[data-theme="dark"] .dos-input-container {
  background: #000000;
}

[data-theme="light"] .dos-input-container {
  background: var(--color-surface);
}

/* Sidebar - DARK MODE ONLY */
[data-theme="dark"] .dos-sidebar {
  background: #000000;
}

[data-theme="light"] .dos-sidebar {
  background: var(--color-surface);
}

/* CRT Screen Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-screen {
  background: #000000;
  position: relative;
}

[data-theme="light"] .dos-screen {
  background: var(--color-surface);
  position: relative;
}

/* Scanlines Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-scanlines {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    rgba(0, 255, 0, 0.03),
    rgba(0, 255, 0, 0.03) 1px,
    transparent 1px,
    transparent 2px
  );
  pointer-events: none;
  z-index: 10;
}

[data-theme="light"] .dos-scanlines {
  display: none;
}

/* CRT Glow Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-screen::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
    ellipse at center,
    rgba(0, 255, 0, 0.05) 0%,
    transparent 70%
  );
  pointer-events: none;
}

[data-theme="light"] .dos-screen::before {
  display: none;
}

/* Text Shadow for CRT Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-container,
[data-theme="dark"] .dos-screen {
  text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
}

[data-theme="light"] .dos-container,
[data-theme="light"] .dos-screen {
  text-shadow: none;
}

/* Header Animation - DARK MODE ONLY */
[data-theme="dark"] .dos-header {
  background: linear-gradient(180deg, #001100 0%, #000000 100%);
  animation: headerFlicker 3s infinite alternate;
}

[data-theme="light"] .dos-header {
  background: var(--color-surface);
  animation: none;
  border-bottom: 1px solid var(--color-border);
}

@keyframes headerFlicker {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.97;
  }
}

/* Scrollbar Styling - DARK MODE ONLY */
[data-theme="dark"] .dos-screen::-webkit-scrollbar {
  width: 12px;
}

[data-theme="dark"] .dos-screen::-webkit-scrollbar-track {
  background: #001100;
  border-left: 2px solid #00ff00;
}

[data-theme="dark"] .dos-screen::-webkit-scrollbar-thumb {
  background: #00ff00;
  border: 2px solid #000000;
}

[data-theme="dark"] .dos-screen::-webkit-scrollbar-thumb:hover {
  background: #00cc00;
}

/* Light mode scrollbar */
[data-theme="light"] .dos-screen::-webkit-scrollbar {
  width: 8px;
}

[data-theme="light"] .dos-screen::-webkit-scrollbar-track {
  background: var(--color-surface);
}

[data-theme="light"] .dos-screen::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: var(--radius-sm);
}

[data-theme="light"] .dos-screen::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-light);
}

/* Blinking Cursor Animation */
@keyframes blink {
  0%, 49% {
    opacity: 1;
  }
  50%, 100% {
    opacity: 0;
  }
}

/* Selection Color - DARK MODE ONLY */
[data-theme="dark"] .dos-container ::selection {
  background: #00ff00;
  color: #000000;
}

[data-theme="light"] .dos-container ::selection {
  background: var(--color-primary-light);
  color: var(--color-text);
}

/* Link Hover Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-container a:hover {
  text-decoration: underline;
  text-shadow: 0 0 10px rgba(0, 255, 0, 0.8);
}

[data-theme="light"] .dos-container a:hover {
  text-decoration: underline;
  text-shadow: none;
  color: var(--color-primary-dark);
}

/* Button Press Effect - DARK MODE ONLY */
[data-theme="dark"] .dos-container button:active {
  transform: translateY(1px);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
}

[data-theme="light"] .dos-container button:active {
  transform: var(--active-transform);
  box-shadow: var(--shadow-sm);
}

/* Screen Flicker on Load - DARK MODE ONLY */
@keyframes screenFlicker {
  0%, 100% {
    opacity: 1;
  }
  25% {
    opacity: 0.9;
  }
  50% {
    opacity: 1;
  }
  75% {
    opacity: 0.95;
  }
}

[data-theme="dark"] .dos-container {
  animation: screenFlicker 0.5s ease-in-out;
}

[data-theme="light"] .dos-container {
  animation: none;
}

/* Vintage CRT Curvature - DARK MODE ONLY */
[data-theme="dark"] .dos-screen {
  border-radius: 2px;
}

[data-theme="light"] .dos-screen {
  border-radius: var(--radius-lg);
}

/* Input Focus Glow - DARK MODE ONLY */
[data-theme="dark"] .dos-container input:focus,
[data-theme="dark"] .dos-container textarea:focus {
  box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
}

[data-theme="light"] .dos-container input:focus,
[data-theme="light"] .dos-container textarea:focus {
  box-shadow: var(--focus-ring);
  outline: var(--focus-outline-width) solid var(--focus-outline-color);
  outline-offset: 2px;
}

/* Message Typing Effect */
@keyframes typing {
  from {
    width: 0;
  }
  to {
    width: 100%;
  }
}

/* Firefox scrollbar - DARK MODE ONLY */
[data-theme="dark"] .dos-screen {
  scrollbar-width: thin;
  scrollbar-color: #00ff00 #001100;
}

[data-theme="light"] .dos-screen {
  scrollbar-width: thin;
  scrollbar-color: var(--color-border) var(--color-surface);
}

/* Prevent text selection on UI elements */
.dos-header,
button,
.dos-input-area {
  user-select: none;
}

/* Allow text selection in messages */
.dos-screen {
  user-select: text;
}

/* ============================================
   LIGHT MODE - COMPONENT COLOR OVERRIDES
   Override Tailwind hardcoded colors in components
   ============================================ */

/* Override black backgrounds */
[data-theme="light"] .dos-container .bg-black {
  background-color: var(--color-background) !important;
}

/* Override green text colors */
[data-theme="light"] .dos-container .text-green-400,
[data-theme="light"] .dos-container .text-green-300,
[data-theme="light"] .dos-container .text-green-500 {
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-container .text-green-600,
[data-theme="light"] .dos-container .text-green-700 {
  color: var(--color-text-secondary) !important;
}

/* Override green borders */
[data-theme="light"] .dos-container .border-green-500,
[data-theme="light"] .dos-container .border-green-400,
[data-theme="light"] .dos-container .border-green-700 {
  border-color: var(--color-border) !important;
}

/* Override green backgrounds */
[data-theme="light"] .dos-container .bg-green-900,
[data-theme="light"] .dos-container .bg-green-800 {
  background-color: var(--color-surface) !important;
}

/* Override cyan colors (user messages) */
[data-theme="light"] .dos-container .text-cyan-400,
[data-theme="light"] .dos-container .text-cyan-300 {
  color: var(--color-primary) !important;
}

[data-theme="light"] .dos-container .border-cyan-500 {
  border-color: var(--color-primary) !important;
}

[data-theme="light"] .dos-container .bg-cyan-900 {
  background-color: var(--color-info-bg) !important;
}

/* Override yellow colors (assistant/warning) */
[data-theme="light"] .dos-container .text-yellow-400,
[data-theme="light"] .dos-container .text-yellow-300 {
  color: var(--color-secondary) !important;
}

[data-theme="light"] .dos-container .border-yellow-500 {
  border-color: var(--color-warning) !important;
}

[data-theme="light"] .dos-container .bg-yellow-900 {
  background-color: var(--color-warning-bg) !important;
}

/* Override red colors (errors/delete) */
[data-theme="light"] .dos-container .text-red-400,
[data-theme="light"] .dos-container .text-red-300 {
  color: var(--color-error) !important;
}

[data-theme="light"] .dos-container .border-red-500,
[data-theme="light"] .dos-container .border-red-700 {
  border-color: var(--color-error) !important;
}

[data-theme="light"] .dos-container .bg-red-900,
[data-theme="light"] .dos-container .bg-red-500 {
  background-color: var(--color-error-bg) !important;
}

/* Override blue colors (buttons) */
[data-theme="light"] .dos-container .text-blue-300 {
  color: var(--color-info) !important;
}

[data-theme="light"] .dos-container .border-blue-500,
[data-theme="light"] .dos-container .border-blue-400 {
  border-color: var(--color-info) !important;
}

[data-theme="light"] .dos-container .bg-blue-900,
[data-theme="light"] .dos-container .bg-blue-800 {
  background-color: var(--color-info-bg) !important;
}

/* Override placeholder text */
[data-theme="light"] .dos-container .placeholder-green-700::placeholder {
  color: var(--color-text-light) !important;
}

/* Remove DOS-specific filters on images */
[data-theme="light"] .dos-container img {
  filter: none !important;
}

/* Standard button hover states in light mode */
[data-theme="light"] .dos-container button:hover {
  opacity: 0.8;
}

/* Override DOS prompt color */
[data-theme="light"] .dos-container .font-mono {
  font-family: var(--font-family-base);
}

/* Keep monospace for pre and code elements */
[data-theme="light"] .dos-container pre,
[data-theme="light"] .dos-container code {
  font-family: var(--font-family-mono);
}

/* Standard borders in light mode */
[data-theme="light"] .dos-container .border-t-2,
[data-theme="light"] .dos-container .border-b-2,
[data-theme="light"] .dos-container .border-r-2,
[data-theme="light"] .dos-container .border-l-2,
[data-theme="light"] .dos-container .border-2 {
  border-width: 1px;
}

/* Standard border radius in light mode */
[data-theme="light"] .dos-container button,
[data-theme="light"] .dos-container input,
[data-theme="light"] .dos-container textarea {
  border-radius: var(--radius-md);
}

[data-theme="light"] .dos-prompt {
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-textarea {
  background: var(--color-background) !important;
  color: var(--color-text) !important;
  border-color: var(--color-border) !important;
}

[data-theme="light"] .dos-textarea::placeholder {
  color: var(--color-text-light) !important;
}

[data-theme="light"] .dos-textarea:focus {
  border-color: var(--color-primary) !important;
}

[data-theme="light"] .dos-button {
  background: var(--color-primary) !important;
  color: var(--color-background) !important;
  border-color: var(--color-primary) !important;
}

[data-theme="light"] .dos-button:hover:not(:disabled) {
  background: var(--color-primary-dark) !important;
  border-color: var(--color-primary-dark) !important;
}

[data-theme="light"] .dos-instructions {
  color: var(--color-text-light) !important;
}

[data-theme="light"] .dos-preview-image {
  filter: none !important;
}

[data-theme="light"] .dos-image-preview {
  border-color: var(--color-border) !important;
}

[data-theme="light"] .dos-remove-button {
  background: var(--color-error) !important;
  border-color: var(--color-error) !important;
}

/* Sidebar light mode */
[data-theme="light"] .dos-sidebar {
  background: var(--color-surface) !important;
  border-color: var(--color-border) !important;
}

[data-theme="light"] .dos-sidebar-header {
  background: var(--color-background) !important;
  border-color: var(--color-border) !important;
}

[data-theme="light"] .dos-sidebar-title {
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-sidebar-button {
  background: var(--color-primary) !important;
  color: var(--color-background) !important;
  border-color: var(--color-primary) !important;
}

[data-theme="light"] .dos-sidebar-button:hover {
  background: var(--color-primary-dark) !important;
  border-color: var(--color-primary-dark) !important;
}

[data-theme="light"] .dos-sidebar-directory,
[data-theme="light"] .dos-sidebar-loading {
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-sidebar-empty {
  color: var(--color-text-light) !important;
}

[data-theme="light"] .dos-conversation-item {
  border-color: var(--color-border) !important;
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-conversation-item:hover {
  border-color: var(--color-primary) !important;
  background: var(--color-background) !important;
}

[data-theme="light"] .dos-conversation-active {
  background: rgba(124, 58, 237, 0.1) !important;
  border-color: var(--color-primary) !important;
  color: var(--color-text) !important;
}

[data-theme="light"] .dos-delete-button {
  color: var(--color-error) !important;
}

[data-theme="light"] .dos-delete-button:hover {
  color: var(--color-error) !important;
  opacity: 1 !important;
}

[data-theme="light"] .dos-sidebar-footer {
  background: var(--color-background) !important;
  border-color: var(--color-border) !important;
  color: var(--color-text-light) !important;
}
