---
/**
 * Email Configuration Page
 * Allows users to view and manage their Gmail accounts
 */

import AppHeader from '@components/AppHeader';
import { initializeDatabase } from '../lib/db';
import { findUserByClerkId } from '../lib/db/repositories/users';

// Initialize database
initializeDatabase();

// Check if user is authenticated
const auth = Astro.locals.auth();
if (!auth?.userId) {
  return Astro.redirect('/sign-in');
}

// Get database user
const dbUser = await findUserByClerkId(auth.userId);
if (!dbUser) {
  return new Response('User not found', { status: 404 });
}
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Email Configuration - Keep Choosing Good</title>
    <meta name="description" content="Configure your Gmail accounts for intelligent email management" />

    <!-- Design Tokens -->
    <link rel="stylesheet" href="/src/styles/themes/tokens.css" />
  </head>
  <body>
    <div class="email-config">
      <!-- Unified Header -->
      <AppHeader currentPage="email" client:only="react" />

      <!-- Welcome Section -->
      <div class="welcome-section">
        <h1 class="welcome-title">Email Configuration</h1>
        <p class="welcome-subtitle">Manage your Gmail accounts for intelligent email organization.</p>
      </div>

      <!-- Main Content -->
      <main class="email-content">
        <!-- Account Selector (shown when multiple Google accounts exist) -->
        <div id="account-selector-container" class="hidden">
          <div class="account-selector-card">
            <label for="account-selector" class="account-selector-label">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <polyline points="16 11 18 13 22 9"></polyline>
              </svg>
              Filter by Google Account:
            </label>
            <select id="account-selector" class="account-selector-select">
              <option value="">All Accounts</option>
            </select>
          </div>
        </div>

        <!-- Connection Banner (shown when not connected) -->
        <div id="connection-banner" class="hidden">
          <div class="banner banner-warning">
            <div class="banner-content">
              <svg class="banner-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
              </svg>
              <div class="banner-text">
                <h3 class="banner-title">Google Account Not Connected</h3>
                <p class="banner-description">Connect your Google account first to enable email features.</p>
              </div>
            </div>
            <a href="/connect-google" class="btn-banner">
              Connect Google Account
            </a>
          </div>
        </div>

        <!-- Status Message -->
        <div id="status-message" class="hidden"></div>

        <div class="cards-grid">
          <!-- Gmail Accounts Card -->
          <section class="card accounts-card">
            <div class="card-header">
              <h2 class="card-title">Gmail Accounts</h2>
              <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </div>
            <div class="card-content">
              <div id="accounts-list">
                <p class="text-muted">Loading accounts...</p>
              </div>
            </div>
          </section>

          <!-- Detect & Add Email Card -->
          <section id="detect-card" class="card detect-card hidden">
            <div class="card-header">
              <h2 class="card-title">Detect & Add Email</h2>
              <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 16v-4"></path>
                <path d="M12 8h.01"></path>
              </svg>
            </div>
            <div class="card-content">
              <div id="detect-initial">
                <p class="card-description">
                  Detect your Gmail email address from your Google account connection.
                </p>
                <button id="detect-btn" class="btn-primary btn-large">
                  Detect Email Account
                </button>
              </div>
              <div id="detect-result" class="hidden">
                <p class="card-description">
                  Email detected: <strong id="detected-email"></strong>
                </p>
                <div class="form-group">
                  <label for="account-type-select" class="form-label">Account Type</label>
                  <select id="account-type-select" class="form-select">
                    <option value="personal">Personal</option>
                    <option value="family">Family</option>
                    <option value="work">Work</option>
                    <option value="school">School</option>
                    <option value="kids">Kids</option>
                  </select>
                </div>
                <button id="add-account-btn" class="btn-primary btn-large">
                  Add Account
                </button>
              </div>
            </div>
          </section>

          <!-- Connect Account Card -->
          <section id="connect-card" class="card connect-card hidden">
            <div class="card-header">
              <h2 class="card-title">Add Gmail Account</h2>
              <svg class="card-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="16"></line>
                <line x1="8" y1="12" x2="16" y2="12"></line>
              </svg>
            </div>
            <div class="card-content">
              <p class="card-description">
                Connect your Google account to enable Gmail management features.
              </p>
              <a href="/connect-google" class="btn-primary btn-large">
                <svg class="btn-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                  <polyline points="10 17 15 12 10 7"></polyline>
                  <line x1="15" y1="12" x2="3" y2="12"></line>
                </svg>
                Connect Google Account
              </a>
            </div>
          </section>
        </div>
      </main>
    </div>

    <script is:inline>
      let detectedEmail = '';
      let selectedAccount = null;
      let allGmailAccounts = [];

      // Make syncAccount globally accessible
      window.syncAccount = async function(accountId) {
        const btn = document.querySelector(`[data-account-id="${accountId}"]`);
        if (!btn) return;

        const originalText = btn.textContent;
        btn.disabled = true;
        btn.textContent = 'Syncing...';

        try {
          const response = await fetch('/api/gmail/sync', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              accountId: accountId,
            }),
          });
          const data = await response.json();

          if (response.ok && data.success) {
            const message = `âœ“ Synced ${data.synced || 0} emails, processed ${data.processed || 0} messages. Contacts automatically extracted!`;
            showMessage(message, 'success');
            // Reload accounts to update lastSynced timestamp and email count
            await loadAccounts();
          } else {
            showMessage('Sync failed: ' + (data.error || 'Unknown error'), 'error');
          }
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : 'Unknown error';
          showMessage('Error during sync: ' + errorMessage, 'error');
        } finally {
          btn.disabled = false;
          btn.textContent = originalText;
        }
      };

      async function checkConnection() {
        try {
          const response = await fetch('/api/google/status');
          const data = await response.json();

          const banner = document.getElementById('connection-banner');
          const connectCard = document.getElementById('connect-card');
          const detectCard = document.getElementById('detect-card');
          const accountsList = document.getElementById('accounts-list');

          if (!response.ok) {
            showMessage('Failed to check connection status', 'error');
            return;
          }

          if (!data.connected) {
            // Show banner
            if (banner) banner.classList.remove('hidden');

            // Hide accounts list, show connect card
            if (accountsList) accountsList.innerHTML = '<p class="text-muted">Connect your Google account to view Gmail accounts.</p>';
            if (connectCard) connectCard.classList.remove('hidden');
            if (detectCard) detectCard.classList.add('hidden');
          } else {
            // Hide banner and load accounts
            if (banner) banner.classList.add('hidden');
            if (connectCard) connectCard.classList.add('hidden');

            // Setup account selector if multiple Google accounts
            if (data.accounts && data.accounts.length > 0) {
              setupAccountSelector(data.accounts);
            }

            await loadAccounts();
          }
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : 'Unknown error';
          showMessage('Error checking connection: ' + errorMessage, 'error');
        }
      }

      function setupAccountSelector(googleAccounts) {
        const container = document.getElementById('account-selector-container');
        const select = document.getElementById('account-selector');

        if (!container || !select || googleAccounts.length === 0) return;

        // Get account from URL query param
        const urlParams = new URLSearchParams(window.location.search);
        selectedAccount = urlParams.get('account') || '';

        // Show selector only if multiple accounts
        if (googleAccounts.length > 1) {
          container.classList.remove('hidden');

          // Populate dropdown
          select.textContent = '';

          // Add "All Accounts" option
          const allOption = document.createElement('option');
          allOption.value = '';
          allOption.textContent = 'All Accounts';
          if (selectedAccount === '') {
            allOption.selected = true;
          }
          select.appendChild(allOption);

          // Add individual accounts
          googleAccounts.forEach(acc => {
            const option = document.createElement('option');
            option.value = acc.email;
            const label = acc.label ? `${acc.email} (${acc.label})` : acc.email;
            option.textContent = label;
            if (acc.email === selectedAccount) {
              option.selected = true;
            }
            select.appendChild(option);
          });

          // Handle account change
          select.addEventListener('change', (e) => {
            selectedAccount = e.target.value;
            renderFilteredAccounts();
          });
        } else {
          container.classList.add('hidden');
          selectedAccount = '';
        }
      }

      function renderFilteredAccounts() {
        const container = document.getElementById('accounts-list');
        const detectCard = document.getElementById('detect-card');
        if (!container) return;

        // Filter accounts by selected Google account
        const filteredAccounts = selectedAccount
          ? allGmailAccounts.filter(acc => acc.google_account_email === selectedAccount)
          : allGmailAccounts;

        if (filteredAccounts.length === 0) {
          container.textContent = '';
          const p = document.createElement('p');
          p.className = 'text-muted';
          p.textContent = selectedAccount
            ? `No Gmail accounts configured for ${selectedAccount}.`
            : 'No Gmail accounts configured yet.';
          container.appendChild(p);
          // Show detect card when no filtered accounts
          if (detectCard) detectCard.classList.remove('hidden');
        } else {
          // Hide detect card when accounts exist
          if (detectCard) detectCard.classList.add('hidden');

          container.textContent = '';
          filteredAccounts.forEach((account) => {
            const lastSynced = account.lastSynced
              ? new Date(account.lastSynced).toLocaleString()
              : 'Never';

            const accountItem = document.createElement('div');
            accountItem.className = 'account-item';

            const accountDetails = document.createElement('div');
            accountDetails.className = 'account-details';

            const title = document.createElement('h3');
            title.className = 'account-title';
            title.textContent = account.email;

            const badges = document.createElement('div');
            badges.className = 'account-badges';

            const typeBadge = document.createElement('span');
            typeBadge.className = 'badge badge-primary';
            typeBadge.textContent = account.accountType || 'personal';
            badges.appendChild(typeBadge);

            const countBadge = document.createElement('span');
            countBadge.className = 'badge badge-info';
            countBadge.textContent = `${account.emailCount || 0} emails`;
            badges.appendChild(countBadge);

            const meta = document.createElement('p');
            meta.className = 'account-meta';
            meta.textContent = `Last synced: ${lastSynced}`;

            accountDetails.appendChild(title);
            accountDetails.appendChild(badges);
            accountDetails.appendChild(meta);

            const actions = document.createElement('div');
            actions.className = 'account-actions';

            const syncBtn = document.createElement('button');
            syncBtn.className = 'btn-sync';
            syncBtn.dataset.accountId = account.id;
            syncBtn.textContent = 'Sync Now';
            syncBtn.onclick = () => window.syncAccount(account.id);
            actions.appendChild(syncBtn);

            accountItem.appendChild(accountDetails);
            accountItem.appendChild(actions);
            container.appendChild(accountItem);
          });
        }
      }

      async function loadAccounts() {
        try {
          const response = await fetch('/api/gmail/accounts');
          const data = await response.json();

          if (response.ok && data.accounts) {
            // Store all accounts for filtering
            allGmailAccounts = data.accounts;
            // Render with current filter
            renderFilteredAccounts();
          } else {
            showMessage('Failed to load accounts: ' + (data.error || 'Unknown error'), 'error');
          }
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : 'Unknown error';
          showMessage('Error loading accounts: ' + errorMessage, 'error');
        }
      }

      async function detectEmail() {
        const btn = document.getElementById('detect-btn');
        if (!btn) return;

        btn.disabled = true;
        btn.textContent = 'Detecting...';

        try {
          const response = await fetch('/api/email/accounts/detect', {
            method: 'POST',
          });
          const data = await response.json();

          if (response.ok && data.detected) {
            detectedEmail = data.email;
            document.getElementById('detected-email').textContent = data.email;
            document.getElementById('detect-initial').classList.add('hidden');
            document.getElementById('detect-result').classList.remove('hidden');
          } else {
            showMessage('Failed to detect email: ' + (data.error || 'Unknown error'), 'error');
            btn.disabled = false;
            btn.textContent = 'Detect Email Account';
          }
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : 'Unknown error';
          showMessage('Error detecting email: ' + errorMessage, 'error');
          btn.disabled = false;
          btn.textContent = 'Detect Email Account';
        }
      }

      async function addAccount() {
        const btn = document.getElementById('add-account-btn');
        const select = document.getElementById('account-type-select');
        if (!btn || !select) return;

        const accountType = select.value;
        btn.disabled = true;
        btn.textContent = 'Adding...';

        try {
          const response = await fetch('/api/email/accounts', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              email: detectedEmail,
              accountType: accountType,
            }),
          });
          const data = await response.json();

          if (response.ok && data.success) {
            showMessage('Account added successfully!', 'success');
            // Reset detection card
            document.getElementById('detect-initial').classList.remove('hidden');
            document.getElementById('detect-result').classList.add('hidden');
            btn.disabled = false;
            btn.textContent = 'Add Account';
            // Reload accounts
            await loadAccounts();
          } else {
            showMessage('Failed to add account: ' + (data.error || 'Unknown error'), 'error');
            btn.disabled = false;
            btn.textContent = 'Add Account';
          }
        } catch (error) {
          const errorMessage = error instanceof Error ? error.message : 'Unknown error';
          showMessage('Error adding account: ' + errorMessage, 'error');
          btn.disabled = false;
          btn.textContent = 'Add Account';
        }
      }

      function showMessage(message, type = 'success') {
        const messageEl = document.getElementById('status-message');
        if (!messageEl) return;

        messageEl.textContent = message;
        messageEl.className = type === 'success'
          ? 'alert alert-success'
          : 'alert alert-error';
        messageEl.classList.remove('hidden');

        setTimeout(() => {
          messageEl.classList.add('hidden');
        }, 5000);
      }

      // Attach event listeners
      document.addEventListener('DOMContentLoaded', () => {
        const detectBtn = document.getElementById('detect-btn');
        const addBtn = document.getElementById('add-account-btn');

        if (detectBtn) {
          detectBtn.addEventListener('click', detectEmail);
        }
        if (addBtn) {
          addBtn.addEventListener('click', addAccount);
        }
      });

      // Check connection on page load
      checkConnection();
    </script>
  </body>
</html>

<style>
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: var(--font-family-base);
    background: var(--color-background);
  }

  .email-config {
    min-height: 100vh;
    background: linear-gradient(to bottom, var(--color-background) 0%, var(--color-surface) 100%);
  }

  /* Welcome Section */
  .welcome-section {
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
    padding: 2rem;
  }

  .welcome-title {
    font-size: 2rem;
    color: var(--color-text);
    margin-bottom: 0.5rem;
    font-weight: 800;
  }

  .welcome-subtitle {
    font-size: 1rem;
    color: var(--color-text-light);
  }

  /* Main Content */
  .email-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  /* Banner Styles */
  .banner {
    padding: 1.5rem;
    border-radius: var(--radius-md);
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .banner-warning {
    background: color-mix(in srgb, #f59e0b 10%, transparent);
    border: 1px solid color-mix(in srgb, #f59e0b 30%, transparent);
  }

  .banner-content {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
  }

  .banner-icon {
    color: #f59e0b;
    flex-shrink: 0;
  }

  .banner-text {
    flex: 1;
  }

  .banner-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 0.25rem;
  }

  .banner-description {
    font-size: 0.75rem;
    color: var(--color-text-light);
  }

  .btn-banner {
    padding: 0.5rem 1rem;
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: background var(--transition-base);
    text-decoration: none;
    white-space: nowrap;
  }

  .btn-banner:hover {
    background: var(--color-primary-dark);
  }

  /* Card Styles */
  .card {
    background: var(--color-surface);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-sm);
    transition: transform var(--transition-base), box-shadow var(--transition-base);
  }

  .card:hover {
    transform: var(--hover-transform);
    box-shadow: var(--shadow-md);
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-border);
  }

  .card-title {
    font-size: 1.25rem;
    color: var(--color-text);
    font-weight: 600;
  }

  .card-icon {
    color: var(--color-primary);
    opacity: 0.7;
  }

  .card-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .card-description {
    font-size: 0.875rem;
    color: var(--color-text-light);
    line-height: 1.5;
  }

  /* Status Messages */
  .alert {
    margin-bottom: 1.5rem;
    padding: 1rem;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 500;
  }

  .alert-success {
    background: var(--color-success-bg);
    border: 1px solid color-mix(in srgb, var(--color-success) 30%, transparent);
    color: var(--color-success-text);
  }

  .alert-error {
    background: color-mix(in srgb, var(--color-error) 10%, transparent);
    border: 1px solid color-mix(in srgb, var(--color-error) 30%, transparent);
    color: var(--color-error);
  }

  .hidden {
    display: none;
  }

  /* Account Items */
  .account-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    background: var(--color-background);
    border-radius: var(--radius-md);
    transition: background var(--transition-base);
    gap: 1rem;
    margin-bottom: 0.75rem;
  }

  .account-item:last-child {
    margin-bottom: 0;
  }

  .account-item:hover {
    background: var(--color-surface);
  }

  .account-details {
    flex: 1;
  }

  .account-title {
    font-size: 0.875rem;
    color: var(--color-text);
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  .account-badges {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.25rem;
  }

  .account-meta {
    font-size: 0.75rem;
    color: var(--color-text-light);
  }

  .account-actions {
    display: flex;
    gap: 0.5rem;
  }

  .btn-sync {
    padding: 0.5rem 1rem;
    background: var(--color-secondary);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-base);
  }

  .btn-sync:hover:not(:disabled) {
    background: var(--color-secondary-hover);
    transform: translateY(-1px);
  }

  .btn-sync:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 600;
  }

  .badge-primary {
    background: rgba(124, 58, 237, 0.1);
    color: var(--color-secondary);
  }

  .badge-info {
    background: rgba(59, 130, 246, 0.1);
    color: #3b82f6;
  }

  .text-muted {
    color: var(--color-text-light);
    font-size: 0.875rem;
  }

  /* Form Styles */
  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-label {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text);
  }

  .form-select {
    padding: 0.75rem;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    color: var(--color-text);
    cursor: pointer;
    transition: border-color var(--transition-base);
  }

  .form-select:focus {
    outline: none;
    border-color: var(--color-primary);
  }

  .form-select:hover {
    border-color: var(--color-primary);
  }

  /* Button Styles */
  .btn-primary {
    padding: 0.75rem 1.5rem;
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: background var(--transition-base);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-decoration: none;
  }

  .btn-primary:hover {
    background: var(--color-primary-dark);
  }

  .btn-large {
    width: 100%;
    padding: 1rem 1.5rem;
    font-size: 1rem;
  }

  .btn-icon {
    flex-shrink: 0;
  }

  /* Account Selector Styles */
  .account-selector-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 1rem 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .account-selector-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text);
    white-space: nowrap;
  }

  .account-selector-label svg {
    color: var(--color-primary);
  }

  .account-selector-select {
    flex: 1;
    padding: 0.5rem 0.75rem;
    background: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    color: var(--color-text);
    font-size: 0.875rem;
    cursor: pointer;
    transition: border-color var(--transition-base);
  }

  .account-selector-select:focus {
    outline: none;
    border-color: var(--color-primary);
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .welcome-section {
      padding: 1.5rem;
    }

    .welcome-title {
      font-size: 1.5rem;
    }

    .welcome-subtitle {
      font-size: 0.875rem;
    }

    .email-content {
      padding: 1rem;
    }

    .cards-grid {
      grid-template-columns: 1fr;
    }

    .banner {
      flex-direction: column;
      align-items: flex-start;
    }

    .btn-banner {
      width: 100%;
      text-align: center;
    }

    .account-item {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .cards-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
